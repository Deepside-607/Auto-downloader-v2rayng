<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دانلود v2rayNG - آخرین نسخه</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap');
        body {
            font-family: 'Vazirmatn', sans-serif;
        }
        .loading {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .gradient-text {
            background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        .download-button {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }
        .download-button:hover {
            background: linear-gradient(135deg, #059669, #047857);
            box-shadow: 0 15px 35px rgba(16, 185, 129, 0.4);
            transform: translateY(-2px);
        }
        .floating-animation {
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .pulse-ring {
            animation: pulse-ring 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
        }
        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 1; }
            80%, 100% { transform: scale(1.2); opacity: 0; }
        }
        .bg-pattern {
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(168, 85, 247, 0.1) 0%, transparent 50%);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen bg-pattern relative overflow-x-hidden">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8">
        <!-- Decorative Elements -->
        <div class="absolute top-10 left-10 w-20 h-20 bg-blue-500/10 rounded-full blur-xl floating-animation"></div>
        <div class="absolute top-32 right-16 w-16 h-16 bg-purple-500/10 rounded-full blur-xl floating-animation" style="animation-delay: -2s;"></div>
        <div class="absolute bottom-20 left-20 w-24 h-24 bg-pink-500/10 rounded-full blur-xl floating-animation" style="animation-delay: -4s;"></div>

        <!-- Header -->
        <div class="text-center mb-12 sm:mb-16 relative">
            <div class="relative inline-block">
                <div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full blur-3xl opacity-20 pulse-ring"></div>
                <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black gradient-text mb-4 sm:mb-6 relative z-10 floating-animation">
                    📱 v2rayNG
                </h1>
            </div>
            <p class="text-xl sm:text-2xl text-slate-300 mb-6 sm:mb-8 px-2 font-medium">دانلود آخرین نسخه از گیتهاب</p>
            <div class="inline-flex items-center glass-effect rounded-full px-6 sm:px-8 py-3 text-sm sm:text-base text-white shadow-2xl">
                <div class="relative ml-3">
                    <span class="w-3 h-3 bg-emerald-400 rounded-full block"></span>
                    <span class="absolute inset-0 w-3 h-3 bg-emerald-400 rounded-full animate-ping"></span>
                </div>
                <span class="font-semibold">به‌روزرسانی خودکار فعال</span>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading" class="text-center px-4">
            <div class="glass-effect rounded-3xl p-8 sm:p-12 mx-auto max-w-md">
                <div class="relative mb-6">
                    <div class="loading w-16 h-16 sm:w-20 sm:h-20 border-4 border-white/20 border-t-emerald-400 rounded-full mx-auto"></div>
                    <div class="absolute inset-0 w-16 h-16 sm:w-20 sm:h-20 border-4 border-transparent border-r-purple-400 rounded-full mx-auto loading" style="animation-delay: -0.5s;"></div>
                </div>
                <p class="text-white text-lg sm:text-xl font-semibold mb-2">در حال دریافت آخرین نسخه...</p>
                <p class="text-slate-400 text-sm">لطفاً صبر کنید</p>
            </div>
        </div>

        <!-- Main Content -->
        <div id="content" class="hidden">
            <!-- Latest Release Card -->
            <div class="glass-effect rounded-3xl sm:rounded-4xl p-6 sm:p-8 lg:p-10 mb-8 sm:mb-12 shadow-2xl fade-in relative overflow-hidden">
                <!-- Background decoration -->
                <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-emerald-400/10 to-blue-400/10 rounded-full blur-2xl"></div>
                <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-purple-400/10 to-pink-400/10 rounded-full blur-2xl"></div>
                
                <div class="relative z-10">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 gap-4">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-2xl flex items-center justify-center text-2xl">
                                🚀
                            </div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-white">آخرین نسخه</h2>
                        </div>
                        <span id="version" class="bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-2xl font-bold text-sm sm:text-base shadow-lg self-start"></span>
                    </div>
                    
                    <div class="grid sm:grid-cols-2 gap-6 sm:gap-8 mb-6 sm:mb-8">
                        <div class="glass-effect rounded-2xl p-4 sm:p-5">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="text-2xl">📅</span>
                                <p class="text-slate-300 font-medium">تاریخ انتشار</p>
                            </div>
                            <p id="releaseDate" class="text-white font-bold text-lg"></p>
                        </div>
                        <div class="glass-effect rounded-2xl p-4 sm:p-5">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="text-2xl">📊</span>
                                <p class="text-slate-300 font-medium">تعداد دانلود</p>
                            </div>
                            <p id="downloadCount" class="text-white font-bold text-lg"></p>
                        </div>
                    </div>

                    <div class="mb-6 sm:mb-8">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="text-2xl">📝</span>
                            <p class="text-slate-300 font-medium text-lg">تغییرات این نسخه</p>
                        </div>
                        <div id="releaseNotes" class="glass-effect rounded-2xl p-4 sm:p-5 text-white text-sm sm:text-base leading-relaxed max-h-40 sm:max-h-48 overflow-y-auto"></div>
                    </div>

                    <div id="downloadLinks" class="space-y-3 sm:space-y-4">
                        <!-- Download links will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Previous Releases -->
            <div class="glass-effect rounded-3xl p-6 sm:p-8 lg:p-10 relative overflow-hidden">
                <!-- Background decoration -->
                <div class="absolute top-0 left-0 w-20 h-20 bg-gradient-to-br from-blue-400/5 to-purple-400/5 rounded-full blur-xl"></div>
                
                <div class="relative z-10">
                    <div class="flex items-center gap-3 mb-6 sm:mb-8">
                        <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-600 rounded-xl flex items-center justify-center text-xl">
                            📦
                        </div>
                        <h3 class="text-xl sm:text-2xl font-bold text-white">نسخه‌های قبلی</h3>
                    </div>
                    <div id="previousReleases" class="space-y-4 sm:space-y-5">
                        <!-- Previous releases will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-12 sm:mt-16 px-4">
            <div class="glass-effect rounded-2xl p-6 sm:p-8 max-w-md mx-auto">
                <div class="flex items-center justify-center gap-2 mb-3">
                    <span class="text-xl">🔄</span>
                    <p class="text-slate-300 font-medium">آخرین به‌روزرسانی:</p>
                </div>
                <p class="text-white font-semibold mb-4" id="lastUpdate"></p>
                <div class="flex items-center justify-center gap-2">
                    <span class="text-lg">🔗</span>
                    <p class="text-slate-400 text-sm">منبع: 
                        <a href="https://github.com/2dust/v2rayNG" target="_blank" class="text-blue-400 hover:text-blue-300 transition-colors font-medium">
                            GitHub - 2dust/v2rayNG
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'https://api.github.com/repos/2dust/v2rayNG/releases';
        
        async function fetchReleases() {
            try {
                const response = await fetch(API_URL);
                const allReleases = await response.json();
                
                // Filter only stable releases (not pre-release/beta)
                const stableReleases = allReleases.filter(release => !release.prerelease);
                
                if (stableReleases.length > 0) {
                    displayLatestRelease(stableReleases[0]);
                    displayPreviousReleases(stableReleases.slice(1, 6)); // Show 5 previous stable releases
                    updateLastUpdateTime();
                }
                
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('content').classList.remove('hidden');
                
            } catch (error) {
                console.error('Error fetching releases:', error);
                document.getElementById('loading').innerHTML = `
                    <div class="glass-effect rounded-3xl p-8 sm:p-12 mx-auto max-w-md text-center">
                        <div class="w-16 h-16 bg-red-500/20 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4">
                            ❌
                        </div>
                        <p class="text-red-300 text-xl font-bold mb-2">خطا در دریافت اطلاعات</p>
                        <p class="text-slate-400 text-sm mb-6">لطفاً اتصال اینترنت خود را بررسی کنید</p>
                        <button onclick="location.reload()" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-2xl transition-all duration-300 hover:scale-105 shadow-lg font-medium">
                            تلاش مجدد
                        </button>
                    </div>
                `;
            }
        }

        function displayLatestRelease(release) {
            document.getElementById('version').textContent = release.tag_name;
            document.getElementById('releaseDate').textContent = new Date(release.published_at).toLocaleDateString('fa-IR');
            
            // Calculate total downloads
            const totalDownloads = release.assets.reduce((sum, asset) => sum + asset.download_count, 0);
            document.getElementById('downloadCount').textContent = totalDownloads.toLocaleString('fa-IR');
            
            // Release notes
            const notes = release.body || 'اطلاعات تغییرات در دسترس نیست';
            document.getElementById('releaseNotes').innerHTML = notes.replace(/\n/g, '<br>');
            
            // Download links
            const downloadLinksContainer = document.getElementById('downloadLinks');
            downloadLinksContainer.innerHTML = '';
            
            release.assets.forEach(asset => {
                if (asset.name.endsWith('.apk')) {
                    const link = document.createElement('a');
                    link.href = asset.browser_download_url;
                    link.className = 'download-button flex flex-col sm:flex-row sm:items-center sm:justify-between text-white p-4 sm:p-5 rounded-2xl transition-all duration-300 gap-3 sm:gap-0 relative overflow-hidden group';
                    link.innerHTML = `
                        <div class="absolute inset-0 bg-gradient-to-r from-emerald-600 to-emerald-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="flex items-center relative z-10">
                            <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-2xl ml-4">
                                📱
                            </div>
                            <div>
                                <p class="font-bold text-base sm:text-lg break-all">${asset.name}</p>
                                <p class="text-sm text-emerald-100">${(asset.size / 1024 / 1024).toFixed(1)} مگابایت</p>
                            </div>
                        </div>
                        <div class="flex items-center justify-between sm:justify-end relative z-10">
                            <span class="text-sm text-emerald-100 ml-3">${asset.download_count.toLocaleString('fa-IR')} دانلود</span>
                            <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center text-xl group-hover:scale-110 transition-transform">
                                ⬇️
                            </div>
                        </div>
                    `;
                    downloadLinksContainer.appendChild(link);
                }
            });
        }

        function displayPreviousReleases(releases) {
            const container = document.getElementById('previousReleases');
            container.innerHTML = '';
            
            releases.forEach(release => {
                const releaseDiv = document.createElement('div');
                releaseDiv.className = 'glass-effect rounded-2xl p-5 hover:bg-white/10 transition-all duration-300 hover:scale-[1.02] hover:shadow-xl';
                
                const apkAssets = release.assets.filter(asset => asset.name.endsWith('.apk'));
                const totalDownloads = release.assets.reduce((sum, asset) => sum + asset.download_count, 0);
                
                releaseDiv.innerHTML = `
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg flex items-center justify-center text-sm">
                                📦
                            </div>
                            <h4 class="text-white font-bold text-base sm:text-lg">${release.tag_name}</h4>
                        </div>
                        <span class="text-slate-400 text-sm bg-white/10 px-3 py-1 rounded-full">${new Date(release.published_at).toLocaleDateString('fa-IR')}</span>
                    </div>
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                        <div class="flex items-center gap-2">
                            <span class="text-lg">📊</span>
                            <span class="text-slate-300 text-sm">${totalDownloads.toLocaleString('fa-IR')} دانلود</span>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            ${apkAssets.map(asset => `
                                <a href="${asset.browser_download_url}" 
                                   class="inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 hover:scale-105 shadow-lg">
                                    <span>📱</span>
                                    دانلود
                                </a>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                container.appendChild(releaseDiv);
            });
        }

        function updateLastUpdateTime() {
            document.getElementById('lastUpdate').textContent = new Date().toLocaleString('fa-IR');
        }

        // Auto-refresh every 10 minutes
        setInterval(fetchReleases, 10 * 60 * 1000);

        // Initial load
        fetchReleases();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96f19924b7c77c93',t:'MTc1NTE4NjUyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
